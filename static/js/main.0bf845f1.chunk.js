(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,n){e.exports=n(43)},35:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(20),c=n.n(r),o=n(5),l=n(48),u=n(45),s=n(47),h=n(46),d=n(13),p=(n(35),n(15),n(16),"ROUTER/REPLACE"),m=function(e){return{type:"READ_ACTIVITIES",activities:e}},v=function(e){return function(t){if("activities"!==t.key||!t.newValue)return null;e.dispatch(m())}},f=n(7),E=n(8),y=n(10),w=n(9),g=n(11),D=(n(38),function(e,t){return{type:"SET_WEATHER_TEXT",weatherText:e,weatherEvery3hour:t}}),b=function(e){function t(){var e,n;Object(f.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(y.a)(this,(e=Object(w.a)(t)).call.apply(e,[this].concat(r)))).monthSelectionArray=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],n.renderMessage=function(e,t){if(t&&e){var n=t.map(function(e,t){return i.a.createElement("td",{key:t},i.a.createElement("p",null,e.time),i.a.createElement("p",null,i.a.createElement("img",{alt:"weather-chart",src:"https://openweathermap.org/img/w/".concat(e.weather.icon,".png")}),e.weather.main),i.a.createElement("p",null,e.main.temp,"\xb0C"))});return i.a.createElement("div",{id:"message"},i.a.createElement("p",null,e),i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,n))))}},n}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=new Date,t=e.getMonth(),n=e.getDate();this.props.onSetMonth(e.getMonth()),this.props.onSetDay(e.getDate()),this.props.onFindWeather({selectedDay:n,selectedMonth:t})}},{key:"componentDidUpdate",value:function(){this.props.weather.selectedDay>this.getNoOfDays(this.props.weather.selectedMonth)&&this.props.onSetDay(1)}},{key:"onChangeMonth",value:function(e){this.props.onSetMonth(e.target.options.selectedIndex)}},{key:"onChangeDate",value:function(e){this.props.onSetDay(e.target.value)}},{key:"onSeeWeather",value:function(){this.props.onFindWeather({selectedDay:this.props.weather.selectedDay,selectedMonth:this.props.weather.selectedMonth})}},{key:"getNoOfDays",value:function(e){var t=new Date;return new Date(t.getFullYear(),e+1,0).getDate()}},{key:"renderMonthSelection",value:function(e){var t=this;if(e||0===e){var n=this.monthSelectionArray[e],a=this.monthSelectionArray.map(function(e,t){return i.a.createElement("option",{value:e,key:t},e)});return i.a.createElement("select",{className:"browser-default",defaultValue:n,onChange:function(e){return t.onChangeMonth(e)}},a)}}},{key:"renderMonthDateSelection",value:function(e){var t=this;if(+e>0){for(var n=this.getNoOfDays(this.props.weather.selectedMonth),a=[],r=1;r<=n;r+=1)a.push(i.a.createElement("option",{value:r,key:r},r));return i.a.createElement("select",{className:"browser-default",defaultValue:e,onChange:function(e){return t.onChangeDate(e)}},a)}}},{key:"render",value:function(){var e=this;return i.a.createElement("div",null,i.a.createElement("h3",{className:"title-area"},"Forecast Weather"),i.a.createElement("div",{className:"content-area"},i.a.createElement("div",{className:"search"},i.a.createElement("div",{className:"search-group"},i.a.createElement("h5",null,"Month"),this.renderMonthSelection(this.props.weather.selectedMonth)),i.a.createElement("div",{className:"search-group"},i.a.createElement("h5",null,"day"),this.renderMonthDateSelection(this.props.weather.selectedDay)),i.a.createElement("div",{className:"search-group"},i.a.createElement("button",{className:"btn indigo",type:"submit",name:"submit",onClick:function(t){return e.onSeeWeather(t)}},"check weather"))),i.a.createElement("div",{className:"search-date"},this.renderMessage(this.props.weather.weatherText,this.props.weather.weatherEvery3hour))))}}]),t}(a.Component),T=Object(o.b)(function(e){return{weather:e.weather}},function(e){return{onSetMonth:function(t){e(function(e){return{type:"SET_MONTH",month:e}}(t))},onSetDay:function(t){e(function(e){return{type:"SET_DATE",day:e}}(t))},onFindWeather:function(t){e(function(e){return function(t){var n=new Request("https://api.openweathermap.org/data/2.5/forecast?id=1880252&appid=c39f3947b671b234f7f5571b40977227&units=metric",{method:"GET"}),a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return fetch(n).then(function(e){return e.json()}).then(function(n){var i=e.selectedMonth,r=e.selectedDay,c=new Date((new Date).getFullYear(),i,r),o=c.getTime()/1e3,l={temp:0,weather:{}},u=[],s=0;n.list.forEach(function(e){if(e.dt>=o&&e.dt<o+86400){l.temp+=e.main.temp,s+=1,l.weather[e.weather[0].main]?l.weather[e.weather[0].main]+=1:l.weather[e.weather[0].main]=1;var t=new Date("".concat(e.dt_txt.substring(0,10),"T").concat(e.dt_txt.substring(11,20),"Z"));u.push({main:e.main,weather:e.weather[0],time:t.toLocaleString().substring(11,20)})}});var h=null,d=0;Object.keys(l.weather).forEach(function(e){l.weather[e]>d&&(d=l.weather[e],h=e)});var p={temp:l.temp?"".concat(Math.round(l.temp/s*100)/100,"\xb0"):"Not Available",weather:h||"Not Available"},m=new Intl.DateTimeFormat("sg",{weekday:"long"}),v="".concat(a[i]," ").concat(r," - ").concat(m.format(c)," (Weather: ").concat(p.weather,", Temperature: ").concat(p.temp,")");t(D(v,u))}).catch(function(){t(D("Not Available",[]))})}}(t))}}})(b),A=function(e){return i.a.createElement("div",null,e.item)},I=(n(40),function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(y.a)(this,Object(w.a)(t).call(this))).onAddActivity=function(){window.open("".concat(window.location.origin).concat(window.location.pathname,"/new"),"_blank")},e.onEditActivity=function(e){window.open("".concat(window.location.origin).concat(window.location.pathname,"/").concat(e),"_blank")},e}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.props.onReadActivities()}},{key:"renderList",value:function(e){var t=this;if(e&&e.length>0){var n=e.map(function(e){var n=i.a.createElement("div",{className:"message collection col s12 m6"},i.a.createElement("span",{className:"title collection-item"},"title:",e.title),i.a.createElement("span",{className:"dateInfo collection-item"},"date:",e.date.toString()));return i.a.createElement("div",{key:e.id,onClick:function(){return t.onEditActivity(e.id)}},i.a.createElement(A,{item:n}))});return i.a.createElement("div",null,n)}return i.a.createElement("p",null,"No Activities.")}},{key:"render",value:function(){var e=this,t=this.props.activities;return this.activities=t,i.a.createElement("div",null,i.a.createElement("h3",null,"ActivityList"),this.renderList(this.activities),i.a.createElement("button",{class:"btn indigo",type:"submit",onClick:function(){return e.onAddActivity()}},"Add"))}}]),t}(a.Component)),S=Object(o.b)(function(e){return{activities:e.activities}},function(e){return{onReadActivities:function(){e(m())}}})(I),O=n(23),N=n.n(O),k=function(e){return{type:p,payload:e}},M=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(y.a)(this,Object(w.a)(t).call(this))).getDefaultValue=function(e,t,n){if(e&&e.id){var a=t.findIndex(function(t){return t.id===parseInt(e.id,10)});if(-1!==a&&t[a][n])return t[a][n]}return null},e}return Object(g.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){N.a.Datepicker.init(this.getDate),this.props.match.params&&this.props.match.params.id&&this.props.onReadActivity(parseInt(this.props.match.params.id),10)}},{key:"handleDelete",value:function(e){e.preventDefault(),this.props.onDeleteActivity(parseInt(this.match.params.id,10))}},{key:"renderDeleteBtn",value:function(e){var t=this;return e&&e.id?i.a.createElement("button",{class:"btn red",type:"delete",onClick:function(e){return t.handleDelete(e)}},"Delete"):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.activities,a=t.dispatch,r=t.match;return this.activities=n,this.dispatch=a,this.match=r,i.a.createElement("div",null,i.a.createElement("h1",null,"Activity"),i.a.createElement("form",{onSubmit:function(t){return e.props.onSubmit(t,e.match.params,e.getTitle.value,e.getDes.value,e.getDate.value)}},i.a.createElement("label",{id:"title",htmlFor:"title"},"Title",i.a.createElement("input",{required:!0,type:"text",id:"titleInput",placeholder:"Title",ref:function(t){e.getTitle=t},defaultValue:this.getDefaultValue(this.match.params,this.activities,"title")})),i.a.createElement("label",{id:"desc",htmlFor:"desc"},"Description",i.a.createElement("input",{required:!0,type:"text",rows:"5",cols:"28",placeholder:"Description",ref:function(t){e.getDes=t},defaultValue:this.getDefaultValue(this.match.params,this.activities,"description")})),i.a.createElement("label",{id:"date",htmlFor:"date"},"Date",i.a.createElement("input",{required:!0,className:"datepicker",ref:function(t){e.getDate=t},type:"text",placeholder:"Date",defaultValue:this.getDefaultValue(this.props.match.params,this.activities,"date")})),this.renderDeleteBtn(this.match.params),i.a.createElement("button",{class:"btn indigo",type:"submit"},"Confirm")))}}]),t}(a.Component),C=Object(o.b)(function(e){return{activities:e.activities}},function(e){return{onDeleteActivity:function(t){e(function(e){return{type:"DELETE_ACTIVITY",id:e}}(parseInt(t,10))),e(k("/activity"))},onSubmit:function(t,n,a,i,r){void 0!==t&&t.preventDefault&&t.preventDefault();var c={title:a,description:i,date:r};n&&n.id?(c.id=parseInt(n.id,10),e(function(e,t){return{type:"EDIT_ACTIVITY",id:e,activity:t}}(c.id,c)),e(k("/activity"))):(e(function(e){return{type:"ADD_ACTIVITY",activity:e}}(c)),e(k("/activity")))},onReadActivity:function(t){e(function(e,t){return{type:"READ_ACTIVITY",id:e,activity:t}}(t))}}})(M),j={activities:[],router:{pathname:"/"},weather:{selectedMonth:null,selectedDay:null,weatherText:"",weatherEvery3hour:[]}},_=n(6),V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.activities,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ACTIVITY":return e.concat([t.activity]);case"EDIT_ACTIVITY":var n=e.findIndex(function(e){return e.id===t.id});return e[n]=t.activity,e;case"DELETE_ACTIVITY":return e.filter(function(e){return e.id!==t.id});case"READ_ACTIVITIES":return e=t.activities;case"READ_ACTIVITY":return e=[t.activity];default:return e}},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.router,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return e.pathname=t.payload,e;default:return e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j.weather,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MONTH":return Object.assign({},e,{selectedMonth:t.month});case"SET_DATE":return Object.assign({},e,{selectedDay:t.day});case"SET_WEATHER_TEXT":return Object.assign({},e,{weatherText:t.weatherText,weatherEvery3hour:t.weatherEvery3hour});default:return e}},J=Object(_.c)({activities:V,router:x,weather:R}),Y=function(e){return function(){return function(t){return function(n){switch(n.type){case p:return e.replace(n.payload),t(n);default:return t(n)}}}}},F=function(){return function(e){return function(t){var n=localStorage.getItem("activities"),a=null,i=1;switch(t.type){case"ADD_ACTIVITY":return n&&(i=(a=JSON.parse(n)).length+1),t.activity.id=(new Date).getTime(),1===i?localStorage.setItem("activities",JSON.stringify([t.activity])):(a.push(t.activity),localStorage.setItem("activities",JSON.stringify(a))),e(t);case"EDIT_ACTIVITY":if(n&&(a=JSON.parse(n)),a){var r=a.findIndex(function(e){return e.id===t.id});-1!==r&&(a[r]=t.activity,localStorage.setItem("activities",JSON.stringify(a)))}return e(t);case"DELETE_ACTIVITY":if(n&&(a=JSON.parse(n)),a){var c=a.findIndex(function(e){return e.id===t.id});-1!==c&&(a.splice(c,1),localStorage.setItem("activities",JSON.stringify(a)))}return e(t);case"READ_ACTIVITIES":return n&&(a=JSON.parse(n)),a||(a=[]),t.activities=a,e(t);case"READ_ACTIVITY":if(n&&(a=JSON.parse(n)),t.activity=null,a){var o=a.findIndex(function(e){return e.id===t.id});-1!==o&&(t.activity=a[o])}return e(t);default:return e(t)}}}},L=n(24),W=function(e,t){return Object(_.d)(J,e,Object(_.a)(Y(t),L.a,F))},q=Object(d.a)({basename:"/React-Redux-Project"}),H=W(j,q);window.addEventListener&&window.addEventListener("storage",v(H));var B=function(){return i.a.createElement(o.a,{store:H},i.a.createElement("div",{className:"App"},i.a.createElement("div",null,i.a.createElement(l.a,{history:q},i.a.createElement("div",null,i.a.createElement("nav",{className:"nav-bar indigo lighten-1"},i.a.createElement("div",{className:"nav-wrapper"},i.a.createElement("ul",{id:"nav-mobile",className:"left"},i.a.createElement("li",null,i.a.createElement(u.a,{to:"/weather"},"ForecastWeather")),i.a.createElement("li",null,i.a.createElement(u.a,{to:"/activity"},"Activity"))))),i.a.createElement(s.a,null,i.a.createElement(h.a,{exact:!0,path:"/",component:T}),i.a.createElement(h.a,{exact:!0,path:"/weather",component:T}),i.a.createElement(h.a,{exact:!0,path:"/activity",component:S}),i.a.createElement(h.a,{exact:!0,path:"/activity/new",component:C}),i.a.createElement(h.a,{exact:!0,path:"/activity/:id",component:C}),i.a.createElement(h.a,{component:T})))))))};c.a.render(i.a.createElement(B,null),document.getElementById("root"))}},[[26,2,1]]]);
//# sourceMappingURL=main.0bf845f1.chunk.js.map